(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/catchingFire.3e173036.png"},function(e,t,a){e.exports=a.p+"static/media/compass.c10dcea6.png"},function(e,t,a){e.exports=a.p+"static/media/frappuccino.4aa9ffd9.png"},function(e,t,a){e.exports=a.p+"static/media/frozenYogurt.554584d7.png"},function(e,t,a){e.exports=a.p+"static/media/hourglass.71854460.svg"},function(e,t,a){e.exports=a.p+"static/media/trophy.879e8a75.png"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC"},,,function(e,t,a){e.exports=a(29)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(6),o=a.n(s),i=(a(26),a(4)),c=a(3),l=a(7),d=a(8),u=a(18),m=a(9),v=a(19),g=a(2),h=a(1),f=a.n(h),k=a(10),p=a.n(k),E=a(11),w=a.n(E),N=a(12),A=a.n(N),M=a(13),b=a.n(M),y=a(14),S=a.n(y),R=a(15),C=a.n(R),B=(a(27),a(16)),x=a.n(B),I=a(17),L=a.n(I),O=f.a.icon({iconUrl:x.a,iconAnchor:[12,41],iconSize:[25,41],popupAnchor:[1,-34],shadowSize:[41,41],shadowUrl:L.a,tooltipAnchor:[16,-28]}),D=(a(28),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).mapRef=r.a.createRef(),e.state={rewards:[{sponsor:"Cupertino Library",name:"Free book of choice",imgURL:p.a,metersEarned:472,metersRequired:500},{sponsor:"Yogurtland",name:"50% off your next cup",imgURL:b.a,metersEarned:1367,metersRequired:2500},{sponsor:"Starbucks",name:"Free coffee",imgURL:A.a,metersEarned:672,metersRequired:1250}],navBarLift:0,currentRewardIndex:1,hasSetTimeout:!1,isCelebratingCompletion:!1,page:K.Map,walkStatus:U.Stationary,now:Date.now(),markerPosition:j},["onWalkingOutDetectorActivated","onWalkingOutDetectorDeactivated","onWalkingInDetectorActivated","onWalkingInDetectorDeactivated","onSelectRewardIndex","onStartPossibleNavLift","onMovePossibleNavLift","onEndPossibleNavLift"].forEach(function(t){e[t]=e[t].bind(Object(g.a)(Object(g.a)(e)))}),e}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.incrementMetersWalked()}},{key:"componentDidUpdate",value:function(){if(this.mapRef&&this.mapRef.current)if(void 0===this.currentMarker||0===this.mapRef.current.children.length){var e=f.a.marker([this.state.markerPosition.lat,this.state.markerPosition.lng],{title:"Current location",icon:O});f.a.map(this.mapRef.current,{center:[j.lat,j.lng],zoom:13,layers:[f.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"),e]}),this.currentMarker=e}else this.currentMarker.setLatLng([this.state.markerPosition.lat,this.state.markerPosition.lng])}},{key:"render",value:function(){switch(this.state.page){case K.Events:return this.renderEventsPage();case K.Map:return this.renderMapPage();case K.Rewards:return this.renderRewardsPage();default:throw new Error("Illegal page: "+this.state.page)}}},{key:"renderEventsPage",value:function(){return r.a.createElement("div",{className:"Mock"},r.a.createElement("div",{className:"EventsList"},r.a.createElement(P,{isActive:!0,sponsor:"Sports Basement",dayOfWeek:"Sunday,",dayDate:"April 14",time:"6:00AM to 11:00AM",bonus:"10%"}),r.a.createElement(P,{sponsor:"Cupertino High School",dayOfWeek:"Wednesday,",dayDate:"April 17",time:"7:00AM to 9:00AM",bonus:"50%"}),r.a.createElement(P,{sponsor:"AMC",dayOfWeek:"Friday,",dayDate:"April 19",time:"7:00AM to 8:30AM",bonus:"25%"})),this.renderNavBar())}},{key:"renderMapPage",value:function(){return this.state.isCelebratingCompletion?this.renderCelebration():this.renderNormalMap()}},{key:"renderCelebration",value:function(){var e=this.state.rewards[this.state.currentRewardIndex];return r.a.createElement("div",{className:"Mock"},e&&r.a.createElement("div",{className:"MeterDisplay"},r.a.createElement("div",{className:"MeterBarBackground MeterBarBackground--celebration"},r.a.createElement("div",{className:"MeterNumbers"},"Challenge complete!"),r.a.createElement("div",{className:"MeterBarForeground",style:{width:e.metersEarned/e.metersRequired*100+"%"}})),r.a.createElement("img",{className:"MeterRewardImage--celebration",src:e.imgURL,alt:e.name})),r.a.createElement("div",{className:"Body Body--celebration"},r.a.createElement("div",{className:"CelebrationBodyOverlay"}),r.a.createElement("div",{className:"MapContainer"},r.a.createElement("div",{className:"LeafletMap",ref:this.mapRef}))),this.renderNavBar())}},{key:"renderNormalMap",value:function(){var e=this.state.rewards[this.state.currentRewardIndex];return r.a.createElement("div",{className:"Mock"},e&&r.a.createElement("div",{className:"MeterDisplay"},r.a.createElement("div",{className:"MeterBarBackground"},r.a.createElement("div",{className:"MeterNumbers"},Math.min(Math.floor(e.metersEarned),e.metersRequired),"/",e.metersRequired,"m"),r.a.createElement("div",{className:"MeterBarForeground",style:{width:e.metersEarned/e.metersRequired*100+"%"}})),r.a.createElement("img",{className:"MeterRewardImage",src:e.imgURL,alt:e.name})),r.a.createElement("div",{className:"Body"},r.a.createElement("div",{className:"MapContainer"},r.a.createElement("div",{className:"LeafletMap",ref:this.mapRef})),r.a.createElement("div",{className:"WalkingOutDetector",onTouchStart:this.onWalkingOutDetectorActivated,onTouchEnd:this.onWalkingOutDetectorDeactivated,onMouseDown:this.onWalkingOutDetectorActivated,onMouseUp:this.onWalkingOutDetectorDeactivated}),r.a.createElement("div",{className:"WalkingInDetector",onTouchStart:this.onWalkingInDetectorActivated,onTouchEnd:this.onWalkingInDetectorDeactivated,onMouseDown:this.onWalkingInDetectorActivated,onMouseUp:this.onWalkingInDetectorDeactivated})),this.renderNavBar())}},{key:"renderRewardsPage",value:function(){var e=this;return r.a.createElement("div",{className:"Mock"},r.a.createElement("div",{className:"RewardsList"},this.state.rewards.map(function(t,a){return r.a.createElement(V,{reward:t,isSelected:e.state.currentRewardIndex===a,onClick:function(){return e.onSelectRewardIndex(a)}})})),this.renderNavBar())}},{key:"incrementMetersWalked",value:function(){var e=this;requestAnimationFrame(function(){e.incrementMetersWalked();var t=Date.now();e.setState(function(a){if(a.walkStatus===U.Out||a.walkStatus===U.In){var n=(t-a.now)/1e3,r=J*n,s=a.rewards.map(function(e,t){if(t!==a.currentRewardIndex)return e;var n=e.metersEarned+r;return n<e.metersRequired?Object(c.a)({},e,{metersEarned:n}):Object(c.a)({},e,{metersEarned:n,alreadyEarned:e.alreadyEarned||!0,FLAG_rewardJustEarned:!e.alreadyEarned})}),o=s.some(function(e){return e.FLAG_rewardJustEarned}),i=o&&!a.hasSetTimeout;return i&&setTimeout(function(){e.setState(function(e){return{hasSetTimeout:!1,isCelebratingCompletion:!1,walkStatus:U.Stationary,page:K.Rewards,currentRewardIndex:e.rewards.findIndex(function(e){return e.metersEarned<=e.metersRequired})}})},15e3),{hasSetTimeout:i||o,now:t,rewards:s,isCelebratingCompletion:o||a.isCelebratingCompletion,markerPosition:{lat:a.markerPosition.lat+(a.walkStatus===U.Out?T(r):-T(r)),lng:a.markerPosition.lng+(a.walkStatus===U.Out?z(r):-z(r))}}}return a.currentRewardIndex!==e.state.currentRewardIndex&&console.log("bang"),Object(c.a)({},a,{now:t})})})}},{key:"onWalkingOutDetectorActivated",value:function(){this.setState({walkStatus:U.Out})}},{key:"onWalkingOutDetectorDeactivated",value:function(){this.setState({walkStatus:U.Stationary})}},{key:"onWalkingInDetectorActivated",value:function(){this.setState({walkStatus:U.In})}},{key:"onWalkingInDetectorDeactivated",value:function(){this.setState({walkStatus:U.Stationary})}},{key:"navigatorFactory",value:function(e){var t=this;return this.state.isCelebratingCompletion?q:function(){t.setState({page:e})}}},{key:"renderNavBar",value:function(){return r.a.createElement("div",{className:"Nav",onTouchStart:this.onStartPossibleNavLift,onTouchMove:this.onMovePossibleNavLift,onTouchEnd:this.onEndPossibleNavLift},r.a.createElement("div",{className:this.state.page===K.Events?"NavIcon NavIcon--active":"NavIcon",onClick:this.navigatorFactory(K.Events)},r.a.createElement("img",{src:S.a,alt:"Hourglass"})),r.a.createElement("div",{className:this.state.page===K.Map?"NavIcon NavIcon--active":"NavIcon",onClick:this.navigatorFactory(K.Map)},r.a.createElement("img",{src:w.a,alt:"Compass"})),r.a.createElement("div",{className:this.state.page===K.Rewards?"NavIcon NavIcon--active":"NavIcon",onClick:this.navigatorFactory(K.Rewards)},r.a.createElement("img",{src:C.a,alt:"Trophy"})))}},{key:"onSelectRewardIndex",value:function(e){this.setState({currentRewardIndex:e})}},{key:"onStartPossibleNavLift",value:function(e){var t=Object(i.a)(e.changedTouches,1)[0];this.setState({previousTouch:t})}},{key:"onMovePossibleNavLift",value:function(e){var t=Object(i.a)(e.changedTouches,1)[0],a=t.clientX-this.state.previousTouch.clientX,n=-(t.clientY-this.state.previousTouch.clientY);(function(e){return Math.abs(e)>X})(Math.atan(n/a))||this.state.navBarLift?this.setState(function(e){return{previousTouch:t,navBarLift:e.navBarLift+n}}):this.setState({previousTouch:t})}},{key:"onEndPossibleNavLift",value:function(){this.setState({previousTouch:null,navBarLift:0})}}]),t}(r.a.Component)),J=1.4;function z(e){return Math.cos(F)*e*W}function T(e){return Math.sin(F)*e*W}var W=1/221200,j={lat:37.315806,lng:-121.998901},U={Stationary:0,Out:1,In:2},F=.5*Math.PI,K={Events:0,Map:1,Rewards:2};function P(e){var t=e.isActive,a=e.sponsor,n=e.dayOfWeek,s=e.dayDate,o=e.time,i=e.bonus;return r.a.createElement("div",{className:t?"Event Event--active":"Event"},r.a.createElement("div",{className:t?"EventBonusContainer EventBonusContainer--active":"EventBonusContainer"},r.a.createElement("div",{className:"EventBonus"},r.a.createElement("span",{className:"EventBonusPlus"},"+"),i)),r.a.createElement("div",{className:"EventTimeContainer"},r.a.createElement("div",{className:"EventSponsor"},a),r.a.createElement("div",{className:"EventDayOfWeek"},n),r.a.createElement("div",{className:"EventDayDate"},s),r.a.createElement("div",{className:"EventTime"},o)))}function V(e){var t=e.reward,a=e.isSelected,n=e.onClick,s=t.sponsor,o=t.name,i=t.imgURL,c=t.metersEarned,l=t.metersRequired,d=c>=l;return r.a.createElement("div",{className:a?"Reward Reward--selected":"Reward",onClick:d?q:n},r.a.createElement("div",{className:"RewardInfoContainer"},r.a.createElement("div",{className:"RewardName"},d?r.a.createElement(r.a.Fragment,null,o,r.a.createElement(H,null)):o),r.a.createElement("div",{className:"RewardSponsor"},s),r.a.createElement("div",{className:d?"RewardProgressBarBackground RewardProgressBarBackground--complete":"RewardProgressBarBackground"},r.a.createElement("div",{className:"RewardProgressBarNumbers"},Math.min(Math.floor(c),l),"/",l,"m"),r.a.createElement("div",{className:d?"RewardProgressBarForeground RewardProgressBarForeground--complete":"RewardProgressBarForeground",style:{width:c/l*100+"%"}}))),r.a.createElement("div",{className:"RewardImage"},r.a.createElement("img",{src:i,alt:o})))}function q(){}function H(){return r.a.createElement("span",{className:"Checkmark"},"\u2713")}var X=.4*Math.PI,Y=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Q(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(D,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");Y?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Q(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):Q(t,e)})}}()}],[[20,1,2]]]);
//# sourceMappingURL=main.eed4f907.chunk.js.map