(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{143:function(e,t,a){e.exports=a.p+"static/media/hourglass.71854460.svg"},144:function(e,t,a){e.exports=a.p+"static/media/compass.c10dcea6.png"},145:function(e,t,a){e.exports=a.p+"static/media/trophy.879e8a75.png"},146:function(e,t,a){e.exports=a.p+"static/media/catchingFire.3e173036.png"},147:function(e,t,a){e.exports=a.p+"static/media/frozenYogurt.554584d7.png"},148:function(e,t,a){e.exports=a.p+"static/media/frappucino.c8dc9194.jpg"},151:function(e,t,a){e.exports=a(355)},156:function(e,t,a){},157:function(e,t,a){},355:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(55),o=a.n(i),s=(a(156),a(57)),c=a(138),l=a(139),d=a(149),m=a(140),u=a(150),v=a(33),g=(a(157),a(34)),p=a(143),h=a.n(p),E=a(144),w=a.n(E),f=a(145),k=a.n(f),N=a(146),y=a.n(N),R=a(147),M=a.n(R),b=a(148),D=a.n(b),S=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).state={rewards:[{sponsor:"Cupertino Library",name:"Free book of choice",imgURL:y.a,metersEarned:1369,metersRequired:2500},{sponsor:"Yogurtland",name:"50% off your next cup",imgURL:M.a,metersEarned:496,metersRequired:500},{sponsor:"Starbucks",name:"Free coffee",imgURL:D.a,metersEarned:672,metersRequired:1250}],currentRewardIndex:0,isCelebratingCompletion:!1,page:j.Map,walkStatus:P.Stationary,now:Date.now(),metersWalked:0,metersRequired:100,markerPosition:A},["onWalkingOutDetectorActivated","onWalkingOutDetectorDeactivated","onWalkingInDetectorActivated","onWalkingInDetectorDeactivated","onSelectRewardIndex"].forEach(function(t){e[t]=e[t].bind(Object(v.a)(Object(v.a)(e)))}),e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.incrementMetersWalked()}},{key:"render",value:function(){switch(this.state.page){case j.Events:return this.renderEventsPage();case j.Map:return this.renderMapPage();case j.Rewards:return this.renderRewardsPage();default:throw new Error("Illegal page: "+this.state.page)}}},{key:"renderEventsPage",value:function(){return r.a.createElement("div",{className:"Mock"},r.a.createElement("div",{className:"EventsList"},r.a.createElement(F,{isActive:!0,sponsor:"Sports Basement",dayOfWeek:"Sunday,",dayDate:"April 14",time:"6:00AM to 11:00AM",bonus:"10%"}),r.a.createElement(F,{sponsor:"Cupertino High School",dayOfWeek:"Wednesday,",dayDate:"April 17",time:"7:00AM to 9:00AM",bonus:"50%"}),r.a.createElement(F,{sponsor:"AMC",dayOfWeek:"Friday,",dayDate:"April 19",time:"7:00AM to 8:30AM",bonus:"25%"})),this.renderNavBar())}},{key:"renderMapPage",value:function(){return this.state.isCelebratingCompletion?this.renderCelebration():this.renderNormalMap()}},{key:"renderCelebration",value:function(){var e=this.state.rewards[this.state.currentRewardIndex];return r.a.createElement("div",{className:"Mock"},e&&r.a.createElement("div",{className:"MeterDisplay"},r.a.createElement("div",{className:"MeterBarBackground MeterBarBackground--celebration"},r.a.createElement("div",{className:"MeterNumbers"},"Challenge complete!"),r.a.createElement("div",{className:"MeterBarForeground",style:{width:e.metersEarned/e.metersRequired*100+"%"}})),r.a.createElement("img",{className:"MeterRewardImage--celebration",src:e.imgURL,alt:e.name})),r.a.createElement("div",{className:"Body Body--celebration"},r.a.createElement("div",{className:"CelebrationBodyOverlay"}),r.a.createElement("div",{className:"MapContainer"},r.a.createElement(I,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyDNBvuTeyVOsMmyT1Y3PHtNccpLiiUNuxw",loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"400px"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}}),markerPosition:this.state.markerPosition}))),this.renderNavBar())}},{key:"renderNormalMap",value:function(){var e=this.state.rewards[this.state.currentRewardIndex];return r.a.createElement("div",{className:"Mock"},e&&r.a.createElement("div",{className:"MeterDisplay"},r.a.createElement("div",{className:"MeterBarBackground"},r.a.createElement("div",{className:"MeterNumbers"},Math.min(Math.floor(e.metersEarned),e.metersRequired),"/",e.metersRequired,"m"),r.a.createElement("div",{className:"MeterBarForeground",style:{width:e.metersEarned/e.metersRequired*100+"%"}})),r.a.createElement("img",{className:"MeterRewardImage",src:e.imgURL,alt:e.name})),r.a.createElement("div",{className:"Body"},r.a.createElement("div",{className:"MapContainer"},r.a.createElement(I,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyDNBvuTeyVOsMmyT1Y3PHtNccpLiiUNuxw",loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"400px"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}}),markerPosition:this.state.markerPosition})),r.a.createElement("div",{className:"WalkingOutDetector",onTouchStart:this.onWalkingOutDetectorActivated,onTouchEnd:this.onWalkingOutDetectorDeactivated,onMouseDown:this.onWalkingOutDetectorActivated,onMouseUp:this.onWalkingOutDetectorDeactivated}),r.a.createElement("div",{className:"WalkingInDetector",onTouchStart:this.onWalkingInDetectorActivated,onTouchEnd:this.onWalkingInDetectorDeactivated,onMouseDown:this.onWalkingInDetectorActivated,onMouseUp:this.onWalkingInDetectorDeactivated})),this.renderNavBar())}},{key:"renderRewardsPage",value:function(){var e=this;return r.a.createElement("div",{className:"Mock"},r.a.createElement("div",{className:"RewardsList"},this.state.rewards.map(function(t,a){return r.a.createElement(L,{reward:t,isSelected:e.state.currentRewardIndex===a,onClick:function(){return e.onSelectRewardIndex(a)}})})),this.renderNavBar())}},{key:"incrementMetersWalked",value:function(){var e=this;requestAnimationFrame(function(){e.incrementMetersWalked();var t=Date.now();e.setState(function(a){if(a.walkStatus===P.Out||a.walkStatus===P.In){var n=(t-a.now)/1e3,r=C*n,i=a.rewards.map(function(e,t){if(t!==a.currentRewardIndex)return e;var n=e.metersEarned+r;return n<e.metersRequired?Object(s.a)({},e,{metersEarned:n}):Object(s.a)({},e,{metersEarned:n,FLAG_isAppCelebratingCompletion:!0})}),o=i.some(function(e){return e.FLAG_isAppCelebratingCompletion});return o&&setTimeout(function(){e.setState(function(e){return{isCelebratingCompletion:!1,walkStatus:P.Stationary,page:j.Rewards,currentRewardIndex:e.rewards.findIndex(function(e){return e.metersEarned<=e.metersRequired})}})},15e3),{now:t,rewards:i,isCelebratingCompletion:o,markerPosition:{lat:a.markerPosition.lat+(a.walkStatus===P.Out?O(r):-O(r)),lng:a.markerPosition.lng+(a.walkStatus===P.Out?B(r):-B(r))}}}return Object(s.a)({},a,{now:t})})})}},{key:"onWalkingOutDetectorActivated",value:function(){this.setState({walkStatus:P.Out})}},{key:"onWalkingOutDetectorDeactivated",value:function(){this.setState({walkStatus:P.Stationary})}},{key:"onWalkingInDetectorActivated",value:function(){this.setState({walkStatus:P.In})}},{key:"onWalkingInDetectorDeactivated",value:function(){this.setState({walkStatus:P.Stationary})}},{key:"navigatorFactory",value:function(e){var t=this;return this.state.isCelebratingCompletion?U:function(){t.setState({page:e})}}},{key:"renderNavBar",value:function(){return r.a.createElement("div",{className:"Nav"},r.a.createElement("div",{className:this.state.page===j.Events?"NavIcon NavIcon--active":"NavIcon",onClick:this.navigatorFactory(j.Events)},r.a.createElement("img",{src:h.a,alt:"Hourglass"})),r.a.createElement("div",{className:this.state.page===j.Map?"NavIcon NavIcon--active":"NavIcon",onClick:this.navigatorFactory(j.Map)},r.a.createElement("img",{src:w.a,alt:"Compass"})),r.a.createElement("div",{className:this.state.page===j.Rewards?"NavIcon NavIcon--active":"NavIcon",onClick:this.navigatorFactory(j.Rewards)},r.a.createElement("img",{src:k.a,alt:"Trophy"})))}},{key:"onSelectRewardIndex",value:function(e){this.setState({currentRewardIndex:e})}}]),t}(r.a.Component),C=1.4,I=Object(g.withScriptjs)(Object(g.withGoogleMap)(function(e){var t=e.markerPosition;return r.a.createElement(g.GoogleMap,{defaultZoom:18,defaultCenter:A},r.a.createElement(g.Marker,{position:t}))}));function B(e){return Math.cos(x)*e*W}function O(e){return Math.sin(x)*e*W}var W=1/221200,A={lat:37.326011,lng:-122.042402},P={Stationary:0,Out:1,In:2},x=.8*Math.PI,j={Events:0,Map:1,Rewards:2};function F(e){var t=e.isActive,a=e.sponsor,n=e.dayOfWeek,i=e.dayDate,o=e.time,s=e.bonus;return r.a.createElement("div",{className:t?"Event Event--active":"Event"},r.a.createElement("div",{className:t?"EventBonusContainer EventBonusContainer--active":"EventBonusContainer"},r.a.createElement("div",{className:"EventBonus"},r.a.createElement("span",{className:"EventBonusPlus"},"+"),s)),r.a.createElement("div",{className:"EventTimeContainer"},r.a.createElement("div",{className:"EventSponsor"},a),r.a.createElement("div",{className:"EventDayOfWeek"},n),r.a.createElement("div",{className:"EventDayDate"},i),r.a.createElement("div",{className:"EventTime"},o)))}function L(e){var t=e.reward,a=e.isSelected,n=e.onClick,i=t.sponsor,o=t.name,s=t.imgURL,c=t.metersEarned,l=t.metersRequired,d=c>=l;return r.a.createElement("div",{className:a?"Reward Reward--selected":"Reward",onClick:d?U:n},r.a.createElement("div",{className:"RewardInfoContainer"},r.a.createElement("div",{className:"RewardName"},d?r.a.createElement(r.a.Fragment,null,o,r.a.createElement(T,null)):o),r.a.createElement("div",{className:"RewardSponsor"},i),r.a.createElement("div",{className:d?"RewardProgressBarBackground RewardProgressBarBackground--complete":"RewardProgressBarBackground"},r.a.createElement("div",{className:"RewardProgressBarNumbers"},Math.min(Math.floor(c),l),"/",l,"m"),r.a.createElement("div",{className:d?"RewardProgressBarForeground RewardProgressBarForeground--complete":"RewardProgressBarForeground",style:{width:c/l*100+"%"}}))),r.a.createElement("div",{className:"RewardImage"},r.a.createElement("img",{src:s,alt:o})))}function U(){}function T(){return r.a.createElement("span",{className:"Checkmark"},"\u2713")}var q=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function G(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(S,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");q?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):G(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):G(t,e)})}}()}},[[151,1,2]]]);
//# sourceMappingURL=main.e6a07eb2.chunk.js.map